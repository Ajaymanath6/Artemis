<!-- Alert Card Container - 64px height with full layout -->
<div class="alert-card-container bg-white rounded-lg transition-all duration-200 cursor-pointer h-16 flex items-center px-4 border-l-4"
     [class.border-gray-200]="!isSelected"
     [class.border-[#146B85]]="isSelected"
     [class.border-r]="!isSelected"
     [class.border-t]="!isSelected"
     [class.border-b]="!isSelected"
     [style.background-color]="isSelected ? '#2f55d90d' : ''"
     (click)="onAlertClick()">
  
  <!-- Left: Toggle Button -->
  <div class="flex-shrink-0 mr-3">
    <button 
      class="toggle-btn relative inline-flex h-5 w-9 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-[#146B85] focus:ring-offset-2"
      [class]="alertData.isActive ? 'bg-[#146B85]' : 'bg-gray-300'"
      (click)="onToggleAlert($event)"
      [title]="alertData.isActive ? 'Alert is active' : 'Alert is inactive'">
      <span class="inline-block h-3 w-3 transform rounded-full bg-white transition-transform"
            [class]="alertData.isActive ? 'translate-x-5' : 'translate-x-1'"></span>
    </button>
  </div>

  <!-- Middle: Alert Name -->
  <div class="flex-1 min-w-0">
    <p class="text-sm font-medium text-gray-900 truncate">
      {{ alertData.name }}
    </p>
  </div>

  <!-- Right: Case Count / Processing State + Actions -->
  <div class="flex-shrink-0 flex items-center gap-2">
    <!-- Processing State -->
    <div *ngIf="alertData.isProcessing" class="flex items-center gap-2 bg-gray-100 px-3 py-1 rounded text-xs font-medium text-gray-700">
      <div class="processing-spinner w-3 h-3 border border-gray-400 border-t-transparent rounded-full animate-spin"></div>
      <span>{{ alertData.processingStatus || 'Searching...' }}</span>
    </div>
    
    <!-- Case Count (when not processing) -->
    <div *ngIf="!alertData.isProcessing" class="bg-gray-100 px-2 py-1 rounded text-xs font-medium text-gray-700">
      {{ alertData.caseCount }} cases
    </div>

    <!-- Edit Button -->
    <button 
      *ngIf="!alertData.isProcessing"
      class="action-btn p-1.5 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded transition-colors"
      (click)="onEditAlert($event)"
      title="Edit alert">
      <i class="ri-edit-line text-sm"></i>
    </button>

    <!-- Delete Button / Spinner -->
    <button 
      *ngIf="!isDeleting && !alertData.isProcessing"
      class="action-btn p-1.5 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded transition-colors"
      (click)="onDeleteAlert($event)"
      title="Delete alert">
      <i class="ri-delete-bin-line text-sm"></i>
    </button>
    
    <!-- Delete Spinner -->
    <div *ngIf="isDeleting" class="delete-spinner-container p-1.5 rounded">
      <div class="delete-spinner w-4 h-4 border border-gray-400 border-t-transparent rounded-full animate-spin"></div>
    </div>
  </div>

</div>
