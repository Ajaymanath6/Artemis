<!-- App Header - Sticky Top Navigation Bar -->
<header class="bg-white sticky top-0 z-50" 
        [class.border-b]="showUserProfile"
        [class.border-stroke-weak]="showUserProfile">
  <div class="px-8">
    <div class="flex items-center justify-between h-16">
      
      <!-- Left Section: Collapse Button + Project Title + Search Query -->
      <div class="flex items-center space-x-4">
        <!-- Sidebar Collapse Button (when sidebar is collapsed) -->
        <button
          *ngIf="showCollapseButton"
          (click)="onCollapseClick()"
          class="p-2 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none">
          <i class="ri-layout-left-line text-lg" style="color: #9CA3AF;"></i>
        </button>

        <!-- Project Title and Search Query -->
        <div *ngIf="showUserProfile && (projectName || searchQuery || showBackButton)" class="flex items-center space-x-2">
          <!-- Back Arrow Button -->
          <button 
            *ngIf="showBackButton"
            (click)="onBackClick()"
            class="flex items-center justify-center w-8 h-8 text-gray-700 hover:bg-gray-100 rounded-md transition-colors">
            <i class="ri-arrow-left-line text-lg"></i>
          </button>
          
          <!-- Project Name (clickable) -->
          <button 
            *ngIf="projectName && !showBackButton"
            (click)="onProjectClick()"
            class="text-gray-600 hover:text-brand hover:bg-gray-50 px-2 py-1 rounded-md transition-colors focus:outline-none font-medium truncate">
            {{ projectName }}
          </button>
          
          <!-- Separator -->
          <span *ngIf="projectName && searchQuery && !showBackButton" class="text-gray-400 font-medium">:</span>
          
          <!-- Search Query (clickable) with search icon -->
          <button 
            *ngIf="searchQuery"
            (click)="onSearchQueryClick()"
            class="text-gray-900 hover:text-brand hover:bg-gray-50 px-2 py-1 rounded-md transition-colors focus:outline-none font-normal truncate flex items-center space-x-2">
            <i class="ri-search-eye-line text-lg"></i>
            <span>{{ searchQuery }}</span>
          </button>
          
          <!-- Subtitle -->
          <div *ngIf="projectName && !searchQuery && !showBackButton" class="flex items-center space-x-2">
            <span class="text-gray-400 font-medium">:</span>
            <span class="text-gray-500 text-sm font-normal">Testing for NY grouping and extractions</span>
          </div>
        </div>
      </div>

      <!-- Right Section: Action Buttons + User Profile + Notifications OR Help Button -->
      <div class="flex items-center space-x-4">
        
        
        <!-- User Profile Variant -->
        <div *ngIf="showUserProfile" class="flex items-center space-x-4">
          <!-- User Profile -->
          <div class="relative">
            <button
              (click)="toggleUserMenu()"
              class="flex items-center space-x-3 p-2 rounded-lg hover:bg-gray-50 transition-colors">
              <div class="w-8 h-8 bg-brand rounded-full flex items-center justify-center">
                <app-phosphor-icon
                  name="user"
                  [size]="16"
                  weight="bold"
                  color="white">
                </app-phosphor-icon>
              </div>
              <div class="hidden md:block text-left">
                <p class="text-sm font-medium text-text-strong">Ajay</p>
                <p class="text-xs text-text-weak">ajaym&#64;unicourt.com</p>
              </div>
              <i class="ri-arrow-down-s-line hidden md:block" style="color: #353D59; font-size: 14px;"></i>
            </button>

            <!-- User Menu Dropdown -->
            <div *ngIf="isUserMenuOpen" 
                 class="absolute right-0 mt-2 w-48 bg-white rounded-lg border border-stroke-weak z-50">
              <div class="py-2">
                <a href="#" class="flex items-center px-4 py-2 text-sm text-text-strong hover:bg-fill">
                  <app-phosphor-icon name="user" [size]="16" weight="regular" color="currentColor" className="mr-3"></app-phosphor-icon>
                  Profile
                </a>
                <a href="#" class="flex items-center px-4 py-2 text-sm text-text-strong hover:bg-fill">
                  <app-phosphor-icon name="gear" [size]="16" weight="regular" color="currentColor" className="mr-3"></app-phosphor-icon>
                  Settings
                </a>
                <hr class="my-2 border-stroke-weak">
                <button (click)="onSignOut()" class="w-full flex items-center px-4 py-2 text-sm text-text-strong hover:bg-fill">
                  <app-phosphor-icon name="sign-out" [size]="16" weight="regular" color="currentColor" className="mr-3"></app-phosphor-icon>
                  Sign Out
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Help Button (default variant) -->
        <button
          *ngIf="!showUserProfile"
          (click)="onHelpClick()"
          class="flex items-center space-x-2 px-4 py-2 border border-stroke-strong rounded-lg text-text-strong hover:bg-fill focus:outline-none transition-colors">
          <app-phosphor-icon
            name="question"
            [size]="16"
            weight="bold"
            color="currentColor">
          </app-phosphor-icon>
          <span class="text-sm font-medium">Need Help?</span>
        </button>
      </div>
    </div>
  </div>

  <!-- Overlay to close dropdowns -->
  <div *ngIf="isUserMenuOpen || isNotificationsOpen" 
       (click)="closeMenus()"
       class="fixed inset-0 z-40"></div>
</header>

